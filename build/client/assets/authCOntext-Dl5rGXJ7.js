import{j as f}from"./jsx-runtime-0DLF9kdB.js";import{r as o,R as S}from"./index-RUgJCupv.js";const a=o.createContext(void 0),h=({children:s})=>{const[c,r]=o.useState(!1),[l,u]=o.useState(""),[i,n]=o.useState(null),m=(e,t)=>{r(!0),u(e.role||""),n(e),t&&localStorage.setItem("token",t),localStorage.setItem("user",JSON.stringify(e))},d=()=>{r(!1),u(""),n(null),localStorage.removeItem("token"),localStorage.removeItem("user")};return S.useEffect(()=>{const e=localStorage.getItem("user");if(e){const t=JSON.parse(e);r(!0),u(t.role||""),n(t)}},[]),f.jsx(a.Provider,{value:{isAuthenticated:c,user:i,role:l,login:m,logout:d},children:s})},v=()=>{const s=o.useContext(a);if(!s)throw new Error("useAuth debe usarse dentro de un AuthProvider");return s};export{h as A,v as u};

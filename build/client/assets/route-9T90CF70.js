import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{r}from"./index-RUgJCupv.js";import{a as c}from"./api-BjYky_W3.js";import"./index-t--hEgTQ.js";const p={opportunity:{name:"",description:"",imageUrl:""},service:{name:"",description:"",imageUrl:""},benefit:{name:"",description:"",imageUrl:""}};function $(){const[t,b]=r.useState([]),[u,h]=r.useState([]),[f,o]=r.useState([]),[q,B]=r.useState(!0),[l,E]=r.useState("opportunity"),[s,d]=r.useState({...p.opportunity}),[g,x]=r.useState(!1),[U,y]=r.useState(""),[F,I]=r.useState("success"),[D,A]=r.useState(!1),v=async()=>{try{const[n,a,i]=await Promise.all([c.get("/Opportunities"),c.get("/Services"),c.get("/Benefits")]);b(n.data),h(a.data),o(i.data)}catch(n){console.error("Error al refrescar los datos:",n)}};r.useEffect(()=>{(async()=>(await v(),B(!1)))()},[]);const O=n=>{const a=n.target.value;E(a),d({...p[a]}),x(!1)},j=n=>{const{name:a,value:i}=n.target;d({...s,[a]:i})},m=(n,a="success")=>{y(n),I(a),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>y(""),2e3)},k=async n=>{n.preventDefault(),A(!0),y("");let a="",i={};l==="opportunity"?(a="/Opportunities",i={name:s.name,description:s.description,adicionalDates:"N/A",applications:"N/A",contactChannels:"N/A",guide:"N/A",observations:"N/A",requirements:"N/A",categoriesId:0,statusReviewId:0,opportunityTypeId:0,imageUrl:s.imageUrl,status:!0}):l==="service"?(a="/Services",i={name:s.name,description:s.description,imageUrl:s.imageUrl}):(a="/Benefits",i={name:s.name,description:s.description,imageUrl:s.imageUrl});try{g&&s.id?(await c.put(`${a}/${s.id}`,i),m("Elemento actualizado exitosamente.","success")):(await c.post(a,i),m("Elemento creado exitosamente.","success")),d({...p[l]}),x(!1),await v()}catch(S){console.error("Error al guardar el elemento:",S),m("Hubo un error al guardar el elemento.","error")}finally{A(!1)}},w=(n,a)=>{E(a),d({...n}),x(!0)},N=async(n,a)=>{let i="";a==="opportunity"&&(i="/Opportunities"),a==="service"&&(i="/Services"),a==="benefit"&&(i="/Benefits");try{await c.delete(`${i}/${n}`),m("Elemento eliminado exitosamente.","success"),await v()}catch(S){console.error("Error al eliminar el elemento:",S),m("Hubo un error al eliminar el elemento.","error")}},R=()=>{d({...p[l]}),x(!1)};return q?e.jsx("p",{children:"Cargando datos..."}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[U&&e.jsx("div",{className:`fixed left-1/2 top-8 transform -translate-x-1/2 z-50 px-6 py-3 rounded shadow-lg font-bold text-lg 
          ${F==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:U}),e.jsx("h1",{className:"text-3xl font-bold text-center text-blue-900 mb-8",children:"Panel de Administración"}),e.jsxs("div",{className:"max-w-lg mx-auto mb-6",children:[e.jsx("label",{htmlFor:"type",className:"block text-gray-700 font-semibold mb-2",children:"Tipo de elemento:"}),e.jsxs("select",{id:"type",value:l,onChange:O,className:"w-full px-4 py-3 border rounded bg-gray-100 text-gray-700 text-lg",disabled:g,children:[e.jsx("option",{value:"opportunity",children:"Oportunidad"}),e.jsx("option",{value:"service",children:"Servicio"}),e.jsx("option",{value:"benefit",children:"Beneficio"})]})]}),e.jsxs("form",{onSubmit:k,className:"max-w-lg mx-auto bg-white p-6 rounded-lg shadow-md mb-8",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 text-gray-700",children:[g?"Editar":"Crear"," ",l==="opportunity"?"Oportunidad":l==="service"?"Servicio":"Beneficio"]}),e.jsx(T,{name:"name",label:"Nombre",value:s.name,onChange:j,required:!0}),e.jsx(z,{name:"description",label:"Descripción",value:s.description,onChange:j,required:!0}),e.jsx(T,{name:"imageUrl",label:"URL Imagen",value:s.imageUrl,onChange:j,required:!0}),e.jsx("button",{type:"submit",disabled:D,className:`bg-blue-500 text-white font-bold py-3 px-5 rounded hover:bg-blue-600 transition duration-200 ${D?"opacity-50 cursor-not-allowed":""}`,children:g?"Actualizar":"Crear"}),e.jsx("button",{type:"button",onClick:R,className:"ml-4 bg-gray-500 text-white font-bold py-3 px-5 rounded hover:bg-gray-600 transition duration-200",children:"Cancelar"})]}),e.jsx(C,{title:"Oportunidades",items:t,type:"opportunity",onEdit:w,onDelete:N}),e.jsx(C,{title:"Servicios",items:u,type:"service",onEdit:w,onDelete:N}),e.jsx(C,{title:"Beneficios",items:f,type:"benefit",onEdit:w,onDelete:N})]})}function T(t){return e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:t.name,className:"block text-gray-700 font-semibold mb-2",children:t.label}),e.jsx("input",{type:t.type||"text",id:t.name,name:t.name,value:t.value,onChange:t.onChange,required:t.required,className:"w-full px-4 py-3 border rounded bg-gray-100 text-gray-700 text-lg"})]})}function z(t){return e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:t.name,className:"block text-gray-700 font-semibold mb-2",children:t.label}),e.jsx("textarea",{id:t.name,name:t.name,value:t.value,onChange:t.onChange,required:t.required,className:"w-full px-4 py-3 border rounded bg-gray-100 text-gray-700 text-lg"})]})}function C({title:t,items:b,type:u,onEdit:h,onDelete:f}){return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-900 mt-8 mb-4",children:t}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:b.map(o=>e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[e.jsx("img",{src:o.imageUrl,alt:o.name,className:"w-full h-48 object-cover rounded-lg mb-4"}),e.jsx("h3",{className:"text-lg font-bold",children:o.name}),e.jsx("p",{className:"text-gray-600",children:o.description}),e.jsxs("div",{className:"mt-4 flex justify-between",children:[e.jsx("button",{onClick:()=>h(o,u),className:"bg-yellow-500 text-white py-1 px-3 rounded hover:bg-yellow-600",children:"Editar"}),e.jsx("button",{onClick:()=>f(o.id,u),className:"bg-red-500 text-white py-1 px-3 rounded hover:bg-red-600",children:"Eliminar"})]})]},o.id))})]})}function G(){return e.jsx($,{})}export{G as default};
